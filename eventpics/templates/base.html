{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'bootstrap.min.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <title>
        {% block title %}
        Galleries
        {% endblock title %}
    </title>
</head>

<body data-bs-theme="light">
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">EventPics</a>
            <a style="color: inherit;" href="#">
                <i id="theme-toggle" class="navbar-brand bi bi-palette-fill ps-2"></i>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">Galleries</a>
                    </li>
                </ul>
                {% if user.is_authenticated %}
                <form class="d-flex ms-auto" method="post" action="{% url 'logout' %}">
                    {% csrf_token %}
                    <button class="btn btn-outline-secondary btn-sm" type="submit">Log out</button>
                </form>
                {% endif %}
            </div>
        </div>
    </nav>
    {% block body %}
    {% endblock body %}
    <script src="{% static 'bootstrap.bundle.min.js' %}"></script>
    <script>
        /*
        Apply the saved theme on page load.
        */
        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-bs-theme', savedTheme);
        });

        /*
        Toggle theme and save the preference in local storage.
        */
        document.getElementById('theme-toggle').addEventListener('click', () => {
            const body = document.body;
            const currentTheme = body.getAttribute('data-bs-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            body.setAttribute('data-bs-theme', newTheme);
            localStorage.setItem('theme', newTheme);
        });
    </script>
</body>

</html>
